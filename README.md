# P vs NP Workbench - Documentation

## نظرة عامة (Overview)
هذا المشروع عبارة عن مختبر بحثي تفاعلي يجمع بين **المحاكاة الحاسوبية الصارمة** و **الذكاء الاصطناعي التوليدي (Google Gemini)** لاستكشاف واحدة من أصعب المسائل في علوم الحاسوب: **مسألة P vs NP**.

يركز التطبيق تحديداً على مسألة **3-SAT** (إرضاء الصيغ المنطقية)، ويقوم بدراسة "التحول الطوري" (Phase Transition) حيث تتحول المسائل فجأة من سهلة الحل إلى مستحيلة عملياً.

---

## 1. خط الإنتاج الموحد (The Unified Pipeline)
يعمل التطبيق عبر "خط إنتاج" متسلسل يقوم بتشغيل 4 مراحل آلية بضغطة زر واحدة:

### المرحلة 1: التحول الطوري (Macro View: Phase Transition)
*   **ماذا يحدث؟** يقوم النظام بتوليد مئات المسائل المنطقية بكثافات مختلفة (نسبة الجمل للشروط $\alpha = m/n$).
*   **الخوارزمية:** يستخدم خوارزمية **DPLL** (خوارزمية دقيقة وتراجعية) لحل المسائل.
*   **المخرجات:**
    *   **Critical Region ($\alpha \approx 4.26$):** النقطة التي ينهار فيها الحل وتصبح المسألة في أقصى تعقيد.
    *   **Max Steps:** عدد الخطوات التي استغرقها المعالج (كلما زاد الرقم، زادت الصعوبة).

### المرحلة 2: الديناميكا الحرارية (Micro View: Annealing Dynamics)
*   **ماذا يحدث؟** يأخذ النظام مسألة "صعبة جداً" ويحاول حلها باستخدام وكيل ذكي (Agent) يعتمد على الاحتمالات بدلاً من الدقة المطلقة.
*   **الخوارزمية:** **Simulated Annealing** (التلدين المحاكى). يحاول الوكيل "تبريد" المسألة للوصول إلى حالة الطاقة صفر (بدون أخطاء).
*   **المخرجات:**
    *   **Errors Curve:** رسم بياني يوضح كيف يحاول الوكيل تقليل الأخطاء بمرور الوقت.
    *   **Escapes:** هل استطاع الوكيل الهرب من "الحد الأدنى المحلي" (Local Minima) بقبول خطوات سيئة مؤقتاً؟

### المرحلة 3: مسبار تباين الطاقة (Energy Variance Probe) - عند $\alpha=5.6$
*   **ماذا يحدث؟** نقوم بتثبيت الكثافة عند مستوى عالٍ جداً وتشغيل الوكيل لمراقبة استقراره.
*   **المخرجات:**
    *   **Variance ($\sigma^2$):**
        *   إذا كانت القيمة **< 0.05**: الوكيل "محبوس" في بئر عميق (Deep Well) ولا يستطيع الحركة (TRAPPED).
        *   إذا كانت القيمة **> 1.0**: النظام في حالة فوضوية سائلة (CHAOTIC).
    *   هذا يحدد "طبيعة الصعوبة": هل هي جمود أم فوضى؟

### المرحلة 4: مسبار التلاكؤ (Hysteresis Probe) - عند $\alpha=5.8$
*   **ماذا يحدث؟** نقارن بين استراتيجيتين للحل لنفس المسألة المستعصية:
    1.  **تبريد سريع (Fast Cooling):** محاولة حل متسرعة (0.95).
    2.  **تبريد بطيء (Slow Cooling):** محاولة حل صبورة جداً (0.999).
*   **المخرجات:**
    *   إذا فشل الاثنان: المسألة ماتت حرارياً (UNSAT / Thermal Death).
    *   إذا نجح البطيء وفشل السريع: الصعوبة تكمن في حواجز الطاقة التي تحتاج لـ "وقت" لتجاوزها (Barriers Crossed).

---

## 2. غرفة عمليات الذكاء الاصطناعي (Research Workspace)
بعد انتهاء المحاكاة، يمكنك التحدث مع ثلاثة "شخصيات" ذكاء اصطناعي (وكلاء) مبنية على Gemini API لتحليل البيانات:

1.  **The Theorist (المنظر):** عالم رياضيات، يتحدث عن البراهين والتعقيد الحسابي (Big O Notation).
2.  **The Empiricist (التجريبي):** مهندس خوارزميات، يركز على الكود والأداء الفعلي للأرقام.
3.  **The Skeptic (المشكك):** مراجع صارم (Red Teamer)، وظيفته البحث عن ثغرات في الفرضيات ومحاولة كسر الحلول.

**زر التقرير (Report):** يقوم بتجميع كل المحادثات والنتائج في نص واحد جاهز للنسخ.

---

## 3. شرح الملفات الرئيسية (Code Structure)

### `satSolver.ts` (المحرك الرياضي)
يحتوي على المنطق الأساسي:
*   `generateRandom3SAT`: توليد مسائل عشوائية.
*   `solveDPLL`: الخوارزمية الدقيقة (Recursive Backtracking).
*   `runSimulatedAnnealingStep`: منطق الوكيل الاحتمالي (Metropolis Criterion).
*   `runEnergyVarianceAnalysis`: كود المرحلة 3.
*   `runHysteresisExperiment`: كود المرحلة 4.

### `SimulationPanel.tsx` (واجهة التحكم)
*   المسؤول عن تشغيل المراحل الأربعة بالتتابع.
*   يحتوي على الرسوم البيانية (Charts) باستخدام مكتبة `recharts`.
*   يعرض البطاقات الملونة لنتائج المسبار (Probes).

### `ResearchWorkspace.tsx` (واجهة الدردشة)
*   واجهة الشات التي تتصل بـ Google Gemini.
*   تقوم بحقن بيانات المحاكاة (Context) داخل الـ Prompt تلقائياً لكي يرى الذكاء الاصطناعي النتائج التي ظهرت لك.

---

## 4. كيفية تفسير النتائج (Interpretation Guide)

| المؤشر | القيمة | المعنى الفيزيائي/الحسابي |
| :--- | :--- | :--- |
| **Satisfiability** | 1.0 -> 0.0 | الانتقال من مسائل ممكنة الحل إلى مستحيلة الحل. |
| **Max Steps** | Spike (Peak) | ذروة الصعوبة، حيث يستهلك الحاسوب أقصى طاقة (Exponential Time). |
| **Variance** | Low (< 0.05) | **Glassy Phase:** النظام متجمد في حل خاطئ يصعب إصلاحه. |
| **Variance** | High (> 1.0) | **Liquid Phase:** النظام يتخبط بعشوائية ولا يجد استقراراً. |
| **Hysteresis** | Slow succeeds | الزمن هو العامل الحاسم؛ المسألة صعبة لكنها قابلة للحل بالصبر. |
| **Hysteresis** | Both fail | المسألة صعبة هيكلياً (Structurally Hard/UNSAT). |

---

## متطلبات التشغيل
1.  متصفح حديث (Chrome/Edge).
2.  مفتاح **Gemini API Key** (اختياري للمحاكاة، ضروري للدردشة مع الوكلاء).
